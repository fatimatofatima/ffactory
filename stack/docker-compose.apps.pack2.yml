version: "3.9"
name: ffactory
networks: { default: { external: true, name: ffactory_ffactory_net } }
services:
  ocr-engine:
    build: { context: ../apps/ocr-engine }
    container_name: ffactory_ocr
    networks: [default]
    ports: [ "127.0.0.1:8090:8080" ]
    healthcheck: { test: ["CMD","wget","-qO-","http://localhost:8080/health"], interval: 10s, timeout: 5s, retries: 40 }
  face-engine:
    build: { context: ../apps/face-engine }
    container_name: ffactory_face
    networks: [default]
    ports: [ "127.0.0.1:8092:8080" ]
    healthcheck: { test: ["CMD","wget","-qO-","http://localhost:8080/health"], interval: 10s, timeout: 5s, retries: 40 }
  embed-search:
    build: { context: ../apps/embed-search }
    container_name: ffactory_embed
    networks: [default]
    ports: [ "127.0.0.1:8093:8080" ]
    healthcheck: { test: ["CMD","wget","-qO-","http://localhost:8080/health"], interval: 10s, timeout: 5s, retries: 40 }
  audit-logger:
    build: { context: ../apps/audit-logger }
    container_name: ffactory_audit_logger
    networks: [default]
    ports: [ "127.0.0.1:8094:8080" ]
    healthcheck: { test: ["CMD","wget","-qO-","http://localhost:8080/health"], interval: 10s, timeout: 5s, retries: 40 }
  evidence-tracker:
    build: { context: ../apps/evidence-tracker }
    container_name: ffactory_evidence_tracker
    networks: [default]
    ports: [ "127.0.0.1:8096:8080" ]
    healthcheck: { test: ["CMD","wget","-qO-","http://localhost:8080/health"], interval: 10s, timeout: 5s, retries: 40 }
